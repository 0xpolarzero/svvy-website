---
import type { AnchorHTMLAttributes, ButtonHTMLAttributes } from 'react'
import { cn } from '@/lib/utils'

interface Props
  extends AnchorHTMLAttributes<HTMLAnchorElement>,
    ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'outline' | 'ghost' | 'link'
  size?: 'xs' | 'sm' | 'md' | 'lg'
  href?: string
  type?: 'button' | 'submit' | 'reset'
  disabled?: boolean
  class?: string
}

const {
  variant = 'primary',
  size = 'md',
  href,
  type = 'button',
  disabled = false,
  class: className = '',
  ...rest
} = Astro.props

const baseClasses =
  'inline-flex items-center justify-center font-medium rounded-sm transition-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50'

const variantClasses = {
  primary: 'bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm',
  outline:
    'border border-border bg-transparent text-foreground hover:text-primary hover:bg-muted hover:border-muted-foreground/30',
  ghost: 'text-foreground/80 hover:text-primary hover:bg-border/30',
  link: 'text-foreground underline-offset-4 hover:underline hover:text-primary',
}

const sizeClasses = {
  xs: 'h-7 px-2 text-[10px] sm:text-[11px] gap-1',
  sm: 'h-7 px-2 text-[10px] sm:text-xs gap-1',
  md: 'h-8 px-2.5 sm:px-3 text-[11px] sm:text-xs gap-1.5',
  lg: 'h-9 px-3 sm:px-4 text-xs sm:text-sm gap-1.5',
}

const classes = cn(baseClasses, variantClasses[variant], sizeClasses[size], className)
---

{
  href ? (
    <a href={href} class={classes} {...rest}>
      <slot />
    </a>
  ) : (
    <button type={type} disabled={disabled} class={classes} {...rest}>
      <slot />
    </button>
  )
}
